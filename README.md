# MOTOR - Система Контроля Версий

MOTOR - это простая система контроля версий, разработанная для отслеживания изменений в файлах и директориях. Она имеет простой интерфейс командной строки и поддерживает основные функции, такие как коммиты, ветвление и теги.

## Сборка проекта

Для сборки проекта выполните следующие команды:

```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

После этого исполняемый файл `motor.exe` будет создан в директории `build/Release` (для Windows) или `build` (для Linux/Mac).

## Основные команды

### Инициализация репозитория

```bash
motor init [путь]
```

Создает пустой репозиторий MOTOR в указанной директории или в текущей директории, если путь не указан.

Пример:
```bash
motor init
# или
motor init my-project
```

Результат:
```
Инициализирован пустой репозиторий Motor
```

### Добавление файлов в индекс

```bash
motor add <файл/директория>
```

Добавляет файл или директорию в индекс для последующего коммита.

Пример:
```bash
motor add file.txt
# или
motor add src/
```

Результат:
```
Добавлено: file.txt
```

### Создание коммита

```bash
motor commit -m "сообщение"
```

Записывает изменения в хранилище с указанным сообщением, содержащим файлы из индекса.

Пример:
```bash
motor commit -m "Добавлен файл README.md"
```

Результат:
```
Создан коммит 9c5df4a7bf355e8d4ca1963890f4b95a4933f2d9
```

### Просмотр статуса

```bash
motor status
```

Показывает состояние рабочей директории.

Пример:
```bash
motor status
```

Результат:
```
На ветке master

Изменения, подготовленные для коммита:
  file.txt
```

### Управление ветками

#### Просмотр веток

```bash
motor branch
```

Выводит список всех веток в репозитории, отмечая текущую ветку звездочкой.

Результат:
```
* master (текущая)
  feature
```

#### Создание новой ветки

```bash
motor branch <имя>
```

Создает новую ветку с указанным именем, начиная с текущего коммита.

Пример:
```bash
motor branch feature
```

Результат:
```
Создана ветка feature
```

#### Удаление ветки

```bash
motor branch -d <имя>
```

Удаляет указанную ветку.

Пример:
```bash
motor branch -d feature
```

Результат:
```
Удалена ветка feature
```

### Переключение между ветками и коммитами

```bash
motor checkout <ветка>
# или
motor checkout <хеш-коммита>
```

Переключается на указанную ветку или состояние определенного коммита.

Примеры:
```bash
motor checkout master
# или
motor checkout feature
# или
motor checkout 9c5df4a7bf355e8d4ca1963890f4b95a4933f2d9
```

Результат:
```
Переключение на ветку 'master'
```
или
```
HEAD теперь на коммите 9c5df4a7bf355e8d4ca1963890f4b95a4933f2d9
```

### Управление тегами

#### Просмотр тегов

```bash
motor tag
```

Показывает список всех тегов в репозитории.

Результат:
```
v1.0
v2.0
```

#### Создание легковесного тега

```bash
motor tag <имя>
```

Создает легковесный тег для текущего коммита.

Пример:
```bash
motor tag v1.0
```

Результат:
```
Создан тег v1.0
```

#### Создание аннотированного тега

```bash
motor tag -a <имя> -m "сообщение"
```

Создает аннотированный тег для текущего коммита с указанным сообщением.

Пример:
```bash
motor tag -a v1.0 -m "Версия 1.0"
```

Результат:
```
Создан тег v1.0
```

#### Удаление тега

```bash
motor tag -d <имя>
```

Удаляет указанный тег.

Пример:
```bash
motor tag -d v1.0
```

Результат:
```
Удален тег v1.0
```

### Просмотр истории коммитов

```bash
motor log
```

Показывает историю коммитов.

Пример:
```bash
motor log
```

Результат:
```
коммит 9c5df4a7bf355e8d4ca1963890f4b95a4933f2d9
Сообщение: Добавлен файл README.md

коммит 13ff09de4c5b3e8d4ca1963890f4b95a4933f2d9
Сообщение: Начальный коммит
```

## Структура репозитория

После инициализации репозитория MOTOR создает директорию `.motor` со следующей структурой:

- `.motor/`
  - `objects/` - хранит все объекты системы (блобы, деревья, коммиты, теги)
  - `refs/` - хранит ссылки на коммиты
    - `heads/` - ветки
    - `tags/` - теги
  - `HEAD` - указывает на текущую ветку
  - `index` - индекс, содержащий информацию о файлах, добавленных для коммита

## Основной рабочий процесс

Типичный рабочий процесс с использованием MOTOR выглядит следующим образом:

1. Инициализация репозитория:
   ```bash
   motor init my-project
   cd my-project
   ```

2. Создание и добавление файлов:
   ```bash
   echo "Hello, World!" > hello.txt
   motor add hello.txt
   ```

3. Создание коммита:
   ```bash
   motor commit -m "Добавлен файл hello.txt"
   ```

4. Создание новой ветки для работы над новой функциональностью:
   ```bash
   motor branch feature
   motor checkout feature
   ```

5. Внесение изменений в новой ветке:
   ```bash
   echo "New feature" > feature.txt
   motor add feature.txt
   motor commit -m "Добавлена новая функциональность"
   ```

6. Возврат в основную ветку:
   ```bash
   motor checkout master
   ```

7. Создание тега для релиза:
   ```bash
   motor tag -a v1.0 -m "Релиз версии 1.0"
   ```

## Ограничения

- MOTOR не имеет встроенной функциональности для синхронизации с удаленными репозиториями
- MOTOR не поддерживает слияние веток автоматически, требуется ручное разрешение конфликтов
- MOTOR не отслеживает переименования и перемещения файлов как специальные операции

## Разработка и поддержка

MOTOR является учебным проектом и демонстрирует основные принципы работы систем контроля версий.
